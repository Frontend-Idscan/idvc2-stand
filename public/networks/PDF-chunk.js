(self.webpackChunk_idscan_idvc2=self.webpackChunk_idscan_idvc2||[]).push([[596],{8766:(e,r,t)=>{t.r(r),t.d(r,{default:()=>P});var n=t(6399);function o(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=Array(r);t<r;t++)n[t]=e[t];return n}function i(e){if(Array.isArray(e))return e}function u(e,r,t,n,o,i,u){try{var a=e[i](u),s=a.value}catch(e){t(e);return}a.done?r(s):Promise.resolve(s).then(n,o)}function a(e){return function(){var r=this,t=arguments;return new Promise(function(n,o){var i=e.apply(r,t);function a(e){u(i,n,o,a,s,"next",e)}function s(e){u(i,n,o,a,s,"throw",e)}a(void 0)})}}function s(e,r){if(!(e instanceof r))throw TypeError("Cannot call a class as a function")}function c(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,r,t){return r&&c(e.prototype,r),t&&c(e,t),e}function f(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function d(e,r){var t,n,o=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],u=!0,a=!1;try{for(o=o.call(e);!(u=(t=o.next()).done)&&(i.push(t.value),!r||i.length!==r);u=!0);}catch(e){a=!0,n=e}finally{try{u||null==o.return||o.return()}finally{if(a)throw n}}return i}}function h(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function p(e,r){return i(e)||d(e,r)||y(e,r)||h()}function y(e,r){if(e){if("string"==typeof e)return o(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if("Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return o(e,r)}}function v(e,r){var t,n,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(t)throw TypeError("Generator is already executing.");for(;u;)try{if(t=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,n=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(o=(o=u.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=r.call(e,u)}catch(e){i=[6,e],n=0}finally{t=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}var b=function(){"use strict";function e(r,t){var n=this;s(this,e),f(this,"successCount",0),f(this,"locations",null),f(this,"pdfCount",0),f(this,"geometry",void 0),f(this,"minPDFframes",1),f(this,"cropSizes",void 0),f(this,"canvasSizes",void 0),f(this,"worker",void 0),f(this,"isInitialized",!1),f(this,"isProcessing",!1),f(this,"coords",[]),f(this,"pdfCapturedCount",0),f(this,"bw",0),f(this,"bh",0),f(this,"preProcessCore",void 0),f(this,"preProcessReader",void 0),f(this,"_errorId",0),this.worker=r,this.worker.onmessage=function(e){var r=e.data,t=r.name,o=r.data;"initialization"===t&&(n.isInitialized=o)},this.worker.postMessage({fn:"init",key:t})}return l(e,[{key:"errorId",get:function(){return this._errorId},set:function(e){this._errorId=[n.l.Detected,n.l.Decoded].includes(e)?0:e}},{key:"errorVal",get:function(){var e;return this.errorId===n.l.LicenseKeyHasExpired&&(e=0),this.errorId===n.l.InvalidLicenseKey&&(e=1),e}},{key:"allocate",value:function(){}},{key:"init",value:function(e,r,t,n){this.geometry=e,this.minPDFframes=r,this.cropSizes=t,this.canvasSizes=n}},{key:"licenseError",value:function(){return{error:!0,errorType:"licenceKeyError",errorVal:this.errorVal}}},{key:"readPDF",value:function(e){var r=this;return a(function(){return v(this,function(t){return[2,new Promise(function(t){r.worker.onmessage=function(e){var n=e.data,o=n.name,i=n.data,u=n.bw,a=n.bh;if("ready"===o)r.worker.postMessage({fn:"process"});else if("result"===o){r.errorId=null==i?void 0:null===(s=i.status)||void 0===s?void 0:s.value;var s,c=(r.errorId?r.licenseError():null)||i;r.bw=u,r.bh=a,t(c)}else t(i)},r.worker.postMessage({fn:"prepare",iData:e})})]})})()}},{key:"drawCords",value:function(e){var r=this,t=[];if(e){var n=[];Object.entries(e).forEach(function(e){var t=p(e,2),o=t[0],i=Math.trunc(t[1]),u=o[0],a=+o[1]-1;n[a]||(n[a]={x:0,y:0}),"x"===u?n[a].x=r.canvasSizes.width*i/r.bw:n[a].y=r.canvasSizes.height*i/r.bh});var o=[n[3].x-n[0].x,n[3].y-n[0].y],i=[n[1].x-n[0].x,n[1].y-n[0].y],u=[n[2].x-n[1].x,n[2].y-n[1].y],a=[n[3].x-n[2].x,n[3].y-n[2].y],s=this.geometry.angleBetweenTwoVectors(o,i),c=this.geometry.angleBetweenTwoVectors(u,a);s<=100&&s>=80&&c<=100&&c>=80&&(t=n)}return t}},{key:"processPDF",value:function(e){var r=this;return a(function(){var t,o;return v(this,function(i){switch(i.label){case 0:if(r.isProcessing)return[2,{}];if(t={status:!1,predict:!1,touch:!1,image:null,type:"pdf",error:null,coords:[],trackString:"",pdfSuccessCount:0,pdfCount:0,isSuccessProcess:!1,pdfCapturedCount:0},!r.isInitialized)return[2,t];return r.isProcessing=!0,[4,r.readPDF(e)];case 1:if(o=i.sent()){if(r.isPDFError(o))return r.isProcessing=!1,t.error=o,[2,t];o.status.value===n.l.Detected&&(r.pdfCapturedCount+=1),o.status.value===n.l.Detected||o.status.value===n.l.Decoded?(t.coords=r.drawCords(o.location),t.isSuccessProcess=!0):(r.successCount+=1,r.drawCords(null)),o.status.value===n.l.Decoded?(r.pdfCount+=1,r.pdfCount>=r.minPDFframes&&(r.successCount=0,r.pdfCount=0,t.trackString=o.trackString||o.data||"",t.status=!0,t.image=e,t.pdfCapturedCount=0)):r.pdfCount=0}return t.pdfSuccessCount=r.successCount,t.pdfCount=r.pdfCount,t.pdfCapturedCount=r.pdfCapturedCount,r.isProcessing=!1,[2,t]}})})()}},{key:"isPDFError",value:function(e){return void 0!==e.error}}]),e}(),w=t(7286);function m(e,r,t,n,o,i,u){try{var a=e[i](u),s=a.value}catch(e){t(e);return}a.done?r(s):Promise.resolve(s).then(n,o)}function g(e){return function(){var r=this,t=arguments;return new Promise(function(n,o){var i=e.apply(r,t);function u(e){m(i,n,o,u,a,"next",e)}function a(e){m(i,n,o,u,a,"throw",e)}u(void 0)})}}function k(e,r){var t,n,o,i,u={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function a(i){return function(a){return function(i){if(t)throw TypeError("Generator is already executing.");for(;u;)try{if(t=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return u.label++,{value:i[1],done:!1};case 5:u.label++,n=i[1],i=[0];continue;case 7:i=u.ops.pop(),u.trys.pop();continue;default:if(!(o=(o=u.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){u=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){u.label=i[1];break}if(6===i[0]&&u.label<o[1]){u.label=o[1],o=i;break}if(o&&u.label<o[2]){u.label=o[2],u.ops.push(i);break}o[2]&&u.ops.pop(),u.trys.pop();continue}i=r.call(e,u)}catch(e){i=[6,e],n=0}finally{t=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,a])}}}var C=function(){var e=g(function(e){var r,n,o;return k(this,function(i){return r=e.pdf417key,n=new Worker(new URL(t.p+t.u(192),t.b),{type:"module"}),o=new b(n,r),w.Z.setModule("module","pdf",o),[2]})});return function(r){return e.apply(this,arguments)}}();let P=C}}]);